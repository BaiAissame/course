name: üõí V√©rification Liste de Courses

on:
  push:
    branches:
      - develop
      - main
  pull_request:

jobs:
  check-format:
    name: V√©rifier le format de la liste
    runs-on: ubuntu-latest

    steps:
      - name: Cloner le d√©p√¥t
        uses: actions/checkout@v3

      - name: V√©rifier l'existence du fichier
        run: |
          if [ ! -f liste_courses.txt ]; then
            echo "‚ùå Erreur : Le fichier liste_courses.txt est introuvable !"
            exit 1
          fi

      - name: Supprimer les lignes vides
        run: |
          sed -i '/^[[:space:]]*$/d' liste_courses.txt
          
      - name: V√©rifier si des modifications ont √©t√© faites
        run: |
          if git diff --exit-code liste_courses.txt; then
            echo "‚úÖ Aucun espace inutile d√©tect√©."
          else
            echo "‚ùå Erreur : Des espaces inutiles ont √©t√© supprim√©s."
            exit 1
          fi

      - name: Succ√®s !
        run: echo "‚úÖ La liste de courses est bien format√©e !"
